interactions:
- request:
    body: '{"name": "king_arthur.txt"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '27'
      User-Agent:
      - PubNub-Python/4.6.1
    method: POST
    uri: https://ps.pndsn.com/v1/files/sub-c-mock-key/channels/files_native_sync_ch/generate-upload-url?uuid=files_native_sync_uuid
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xV23KjOBD9lS2/zhBL3GKyNQ8EXxkgtsHisruVEiAwmIvHiNh4Kv++wk4y3snL
        PmDUrdOt091H+OegoZi2zeCBB+DrIMYUDx5+DrJ48DAg0b2E+TjkZCm650QZJ5wS8jInQ0VQkpEy
        EqA4+DqocEkYepdV6TM+0G17uKMnOnj9Okiygjy3+6LG8fOB/GhJQ/vk7aFg+C2l++ZhONy3YdWG
        XFmRsm66inB9VMORlotIRQ+44CC3P8R3jXCHS3yuK3xs7qK6HLKjS0K3dU91+WQ7zCanfXbANKur
        Z1ZJz4oHPOAg5KDi8OABwAegBAyY1IfyOclIEbPK//o52JGOgSlOU1YF23/BRduH/90CIETO1X8x
        yIfLJvQ3z635nXRX8ynMSUQdx1hUY9w1193hx/bVRv15Vwd8Q9y43jy/nTD8zGH4H6ZsBO+V9b+/
        qmpYvyMuGo14kU8wBwVMWI9IyIWRILK2y0msyPc4UaRhwtGFGlme/qSUI5i4CD3XXGKvuBfS7q2D
        U9RI3SxDslmthv9HL8PPMnnnqNUVZRPnnG5PbshScqLDfYGz6s8/oi0+NIR+a2nCjW5CPU4tz5x2
        IDFLkOHiJlz9vlD9e3Ujz1Zj6bv7aAvT2bBXBYRQGd6qbNgIQ6Yt8UOqv+e3SdQeMtpxTr0j1c0Z
        n5BqkdYMuS1vibi2yM1NVePsucpL8qegca/YX/h3jky3APaq/YVf1kUW3Q5Uq5rvmq0XZP64j8op
        wK7SLvI6XeSLo5mr1HQm7Ck2bC2b4wl7CrzIjn1MHvLSDnvrPXuf+xj3WOua12R+hXLMI3DJUz1C
        v5Sgn0EaloiGgiWF5YYGZdEEnkkDb0N9HrXxXN+GGjgZ3mMXaLpiqCwXarLAm2SGpmb6fL0N+Hgf
        ltHFXk4/7C+XNbSKeCyO0GxaLfOTEXi7Lw6v/whcC6Dp2rRdaeJ7xXmpKZe95TTYhnNULPPJyIDv
        6+PLNf763rAa3tcBX7TBWcw8m9W+KsJFiU6sD+kiWx9YvgunSECZ4ZrUP6eima+6oOx7Z20DG5xM
        t9/Tc/O8YvVu+KBcSVYeb4N8Bw3ep/GkePSB5Nu7kRQ66SkoYhcVyovhBs7GhnzgoaNT6Ztwprgr
        hFZ+idAGTV4C1xQsd9IFswW1cpRbHQBWOS0Np8jM3Ge+iWSei/JpvBPN8wQYPGU9ixPf0wGeo86o
        1mKs6fF7v31eaeMZm4cGm8CVqniWUqaLNuA3fY1H9sC+tqdxevzoRWWBPl/Use+Bt67f+jJmugAs
        BzDQWopml/hsUYBGS3c66XTRcKeUZDCPSrTrcdidNhfN7KaGvZkGFpgiaxev12NkIKA7Jgjmxvmi
        yxPTpWTwCBquVYTVuvPdIzVt5Wx2yjYWTOAJehF5qIiEVZZced4vqpT6LpQNzyp8AXWMq2R46xem
        1avmszfdMQ0TDW5Dr2b4UxUK+j6ebekbN2/DZmhP4OOqg449mXSW438+w11vY1bzU6ayOagduzun
        t3t0NB1VcrNFmqxq3VvtFS399u3zJyNLK/b3eri92IpyLwNJCRUsEZkHoxCLGIQkjkQgynwsJwmM
        AZYTCGWeH4EIgnsxkXg+FGXCYxkOXv95ff0XAAD//wMArBAkrbgHAAA=
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Date:
      - Thu, 19 Nov 2020 20:00:09 GMT
      Vary:
      - Accept-Encoding
    status:
      code: 200
      message: OK
- request:
    body: "--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition: form-data; name=\"\
      tagging\"\r\n\r\n<Tagging><TagSet><Tag><Key>ObjectTTLInDays</Key><Value>1</Value></Tag></TagSet></Tagging>\r\
      \n--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition: form-data; name=\"\
      key\"\r\n\r\nsub-c-mock-key/f-tIAcNXJO9m81fWVV_o-fSQ-veupNrTloVAUPbeUQQ/ec75a2db-65c7-46af-9b26-61939f898314/king_arthur.txt\r\
      \n--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition: form-data; name=\"\
      Content-Type\"\r\n\r\ntext/plain; charset=utf-8\r\n--96df544f6e8c2c3f3920b0f27f3db1f4\r\
      \nContent-Disposition: form-data; name=\"X-Amz-Credential\"\r\n\r\nAKIAY7AU6GQD5KWBS3FG/20201119/eu-central-1/s3/aws4_request\r\
      \n--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition: form-data; name=\"\
      X-Amz-Security-Token\"\r\n\r\n\r\n--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition:\
      \ form-data; name=\"X-Amz-Algorithm\"\r\n\r\nAWS4-HMAC-SHA256\r\n--96df544f6e8c2c3f3920b0f27f3db1f4\r\
      \nContent-Disposition: form-data; name=\"X-Amz-Date\"\r\n\r\n20201119T200109Z\r\
      \n--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition: form-data; name=\"\
      Policy\"\r\n\r\nCnsKCSJleHBpcmF0aW9uIjogIjIwMjAtMTEtMTlUMjA6MDE6MDlaIiwKCSJjb25kaXRpb25zIjogWwoJCXsiYnVja2V0IjogInB1Ym51Yi1tbmVtb3N5bmUtZmlsZXMtZXUtY2VudHJhbC0xLXByZCJ9LAoJCVsiZXEiLCAiJHRhZ2dpbmciLCAiPFRhZ2dpbmc+PFRhZ1NldD48VGFnPjxLZXk+T2JqZWN0VFRMSW5EYXlzPC9LZXk+PFZhbHVlPjE8L1ZhbHVlPjwvVGFnPjwvVGFnU2V0PjwvVGFnZ2luZz4iXSwKCQlbImVxIiwgIiRrZXkiLCAic3ViLWMtYzg4MjQyZmEtMTNhZS0xMWViLWJjMzQtY2U2ZmQ5NjdhZjk1L2YtdElBY05YSk85bTgxZldWVl9vLWZTUS12ZXVwTnJUbG9WQVVQYmVVUVEvZWM3NWEyZGItNjVjNy00NmFmLTliMjYtNjE5MzlmODk4MzE0L2tpbmdfYXJ0aHVyLnR4dCJdLAoJCVsiY29udGVudC1sZW5ndGgtcmFuZ2UiLCAwLCA1MjQyODgwXSwKCQlbInN0YXJ0cy13aXRoIiwgIiRDb250ZW50LVR5cGUiLCAiIl0sCgkJeyJ4LWFtei1jcmVkZW50aWFsIjogIkFLSUFZN0FVNkdRRDVLV0JTM0ZHLzIwMjAxMTE5L2V1LWNlbnRyYWwtMS9zMy9hd3M0X3JlcXVlc3QifSwKCQl7IngtYW16LXNlY3VyaXR5LXRva2VuIjogIiJ9LAoJCXsieC1hbXotYWxnb3JpdGhtIjogIkFXUzQtSE1BQy1TSEEyNTYifSwKCQl7IngtYW16LWRhdGUiOiAiMjAyMDExMTlUMjAwMTA5WiIgfQoJXQp9Cg==\r\
      \n--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition: form-data; name=\"\
      X-Amz-Signature\"\r\n\r\n9976059b9a5e6208ba4a0bedc40462d6ff1d0a6f1162280c1074f522b46e2a61\r\
      \n--96df544f6e8c2c3f3920b0f27f3db1f4\r\nContent-Disposition: form-data; name=\"\
      file\"; filename=\"king_arthur.txt\"\r\n\r\nKnights who say Ni!\r\n--96df544f6e8c2c3f3920b0f27f3db1f4--\r\
      \n"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '2314'
      Content-Type:
      - multipart/form-data; boundary=96df544f6e8c2c3f3920b0f27f3db1f4
      User-Agent:
      - PubNub-Python/4.6.1
    method: POST
    uri: https://pubnub-mnemosyne-files-eu-central-1-prd.s3.amazonaws.com/
  response:
    body:
      string: ''
    headers:
      Date:
      - Thu, 19 Nov 2020 20:00:10 GMT
      ETag:
      - '"3676cdb7a927db43c846070c4e7606c7"'
      Location:
      - https://pubnub-mnemosyne-files-eu-central-1-prd.s3.amazonaws.com/sub-c-mock-key%2Ff-tIAcNXJO9m81fWVV_o-fSQ-veupNrTloVAUPbeUQQ%2Fec75a2db-65c7-46af-9b26-61939f898314%2Fking_arthur.txt
      Server:
      - AmazonS3
      x-amz-expiration:
      - expiry-date="Sat, 21 Nov 2020 00:00:00 GMT", rule-id="Archive file 1 day after
        creation"
      x-amz-id-2:
      - A6YngC58iQIuE2uLkm65EMcHqPNAyDx9gB4tk9uUclaKKke31YylNWTVATJvEEazROWaL2atqyM=
      x-amz-request-id:
      - 69D7186D457E54B4
      x-amz-server-side-encryption:
      - AES256
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - PubNub-Python/4.6.1
    method: GET
    uri: https://ps.pndsn.com/v1/files/publish-file/pub-c-mock-key/sub-c-mock-key/0/files_native_sync_ch/0/%7B%22message%22%3A%20%7B%22test_message%22%3A%20%22test%22%7D%2C%20%22file%22%3A%20%7B%22id%22%3A%20%22ec75a2db-65c7-46af-9b26-61939f898314%22%2C%20%22name%22%3A%20%22king_arthur.txt%22%7D%7D?meta=null&store=1&ttl=222&uuid=files_native_sync_uuid
  response:
    body:
      string: '[1,"Sent","16058160096948699"]'
    headers:
      Access-Control-Allow-Methods:
      - GET
      Access-Control-Allow-Origin:
      - '*'
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - text/javascript; charset="UTF-8"
      Date:
      - Thu, 19 Nov 2020 20:00:09 GMT
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - PubNub-Python/4.6.1
    method: GET
    uri: https://ps.pndsn.com/v1/files/sub-c-mock-key/channels/files_native_sync_ch/files/ec75a2db-65c7-46af-9b26-61939f898314/king_arthur.txt?uuid=files_native_sync_uuid
  response:
    body:
      string: ''
    headers:
      Access-Control-Allow-Origin:
      - '*'
      Cache-Control:
      - public, max-age=3831, immutable
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Date:
      - Thu, 19 Nov 2020 20:00:09 GMT
      Location:
      - https://files-eu-central-1.pndsn.com/sub-c-mock-key/f-tIAcNXJO9m81fWVV_o-fSQ-veupNrTloVAUPbeUQQ/ec75a2db-65c7-46af-9b26-61939f898314/king_arthur.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAY7AU6GQD5KWBS3FG%2F20201119%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20201119T200000Z&X-Amz-Expires=3900&X-Amz-SignedHeaders=host&X-Amz-Signature=ba518b25b2ce6544646a697acd0d77dc94ad347d36f786cb1070b66c954cb62e
    status:
      code: 307
      message: Temporary Redirect
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - PubNub-Python/4.6.1
    method: GET
    uri: https://files-eu-central-1.pndsn.com/sub-c-mock-key/f-tIAcNXJO9m81fWVV_o-fSQ-veupNrTloVAUPbeUQQ/ec75a2db-65c7-46af-9b26-61939f898314/king_arthur.txt?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAY7AU6GQD5KWBS3FG%2F20201119%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20201119T200000Z&X-Amz-Expires=3900&X-Amz-Signature=ba518b25b2ce6544646a697acd0d77dc94ad347d36f786cb1070b66c954cb62e&X-Amz-SignedHeaders=host
  response:
    body:
      string: Knights who say Ni!
    headers:
      Accept-Ranges:
      - bytes
      Connection:
      - keep-alive
      Content-Length:
      - '19'
      Content-Type:
      - text/plain; charset=utf-8
      Date:
      - Thu, 19 Nov 2020 20:00:11 GMT
      ETag:
      - '"3676cdb7a927db43c846070c4e7606c7"'
      Last-Modified:
      - Thu, 19 Nov 2020 20:00:10 GMT
      Server:
      - AmazonS3
      Via:
      - 1.1 a2a926ace399371954fc9fbb55fd02ab.cloudfront.net (CloudFront)
      X-Amz-Cf-Id:
      - xs9ND4aDZCOO9uyAnqO4ImETMQMgOcLcWeCVv_JoOxAJo_x2BGkHwA==
      X-Amz-Cf-Pop:
      - BUD50-C1
      X-Cache:
      - Miss from cloudfront
      x-amz-expiration:
      - expiry-date="Sat, 21 Nov 2020 00:00:00 GMT", rule-id="Archive file 1 day after
        creation"
      x-amz-server-side-encryption:
      - AES256
    status:
      code: 200
      message: OK
version: 1
